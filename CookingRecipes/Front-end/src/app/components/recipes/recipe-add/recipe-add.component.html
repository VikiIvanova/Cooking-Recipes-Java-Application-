<div class="add-recipe-form">
  <div class="card">
    <h1 class="add-recipe-title">Добави рецепта</h1>
    <div class="card-content">
      <form [formGroup]="addRecipeForm" (ngSubmit)="addRecipe(addRecipeForm)">
        <div class="form-field">
          <label for="name">Име на рецептата</label>
          <input type="text" id="name" placeholder="Име на рецептата" formControlName="name">
          <div class="error"
               *ngIf="addRecipeForm.get('name')?.touched && addRecipeForm.get('name')?.hasError('required')">
            Името е задължително!
          </div>
        </div>
        <div class="form-field">
          <label for="description">Описание</label>
          <textarea id="description" placeholder="Описание" formControlName="description"></textarea>
          <div class="error"
               *ngIf="addRecipeForm.get('description')?.touched && addRecipeForm.get('description')?.hasError('required')">
            Описанието е задължително!
          </div>
        </div>
        <div class="form-field">
          <label for="category">Категория</label>
          <select id="category" formControlName="category">
            <option value="SALADS">Салати</option>
            <option value="STARTERS">Предястия</option>
            <option value="MEAT_DISHES">Ястия с месо</option>
            <option value="MEATLESS_DISHES">Ястия без месо</option>
            <option value="DESSERTS">Десерти</option>
          </select>
        </div>
        <div>
          <form (ngSubmit)="uploadImage()" enctype="multipart/form-data">
            <input type="file" (change)="onFileSelected($event)" accept="image/*"/>
            <button type="submit">Добави снимка</button>
          </form>
        </div>
        <div>
          <form class="products-form" [formGroup]="addRecipeForm">
            <div formArrayName="products" *ngFor="let product of addRecipeForm.get('products')?.value; let i = index">
              <div [formGroupName]="i">
                <div class="products-form-content">
                <div class="products-field">
                  <label for="product-name">Име на продукт</label>
                  <input type="text" id="product-name" class="product-name" placeholder="Име" formControlName="name">
                </div>
                <div class="products-field">
                  <label for="product-quantity">Количество</label>
                  <input type="number" id="product-quantity" class="product-quantity" formControlName="quantity">
                </div>
                <div class="products-field">
                  <label for="product-measure" >Мярка</label>
                  <select id="product-measure" class="product-measure" formControlName="measure">
                    <option value="GRAMS">гр.</option>
                    <option value="MILLILITRES">мл.</option>
                    <option value="COUNT">бр.</option>
                  </select>
                </div>
                </div>
              </div>
            </div>
            <div class="button-div">
              <button type="submit" (click)="addProduct()">Нов продукт</button>
            </div>
          </form>
        </div>
        <div class="button-div">
          <button type="submit">Добави рецептата!</button>
        </div>
      </form>
    </div>
  </div>
</div>
